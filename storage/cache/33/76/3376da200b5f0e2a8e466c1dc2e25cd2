9999999999s:12501:"System.register("datitisev/dashboard/changeDashboardPage",["flarum/extend","datitisev/dashboard/components/DashboardPage"],function(f,h){var a;f("default",function(){app.routes.dashboard={path:"/",component:a.component()}});return{setters:[function(a){},function(d){a=d["default"]}],execute:function(){}}});"use strict";
System.register("datitisev/dashboard/components/DashboardPage",["flarum/extend","flarum/components/Page","flarum/utils/ItemList","datitisev/dashboard/components/WidgetGraph","datitisev/dashboard/components/WidgetVersions"],function(f,h){var a,d,e,b,g;return{setters:[function(c){},function(c){a=c["default"]},function(c){d=c["default"]},function(c){e=c["default"]},function(c){b=c["default"]}],execute:function(){g=function(c){function a(){babelHelpers.classCallCheck(this,a);return babelHelpers.possibleConstructorReturn(this,
(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}babelHelpers.inherits(a,c);babelHelpers.createClass(a,[{key:"view",value:function(){var c=this;return m("div",{className:"DashboardPage"},m("div",{className:"container"},m("h2",null,app.translator.trans("core.admin.dashboard.welcome_text")),Object.keys(this.items().items).map(function(a){if(a=c.items().get(a))return new a})))}},{key:"items",value:function(){var a=new d;a.add("countData",e);a.add("versions",b);return a}}]);return a}(a);
f("default",g)}}});"use strict";
System.register("datitisev/dashboard/components/DashboardSettingsModal",["flarum/components/SettingsModal","flarum/app"],function(f,h){var a,d,e;return{setters:[function(b){a=b["default"]},function(a){d=a["default"]}],execute:function(){e=function(a){function b(){babelHelpers.classCallCheck(this,b);return babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}babelHelpers.inherits(b,a);babelHelpers.createClass(b,[{key:"className",value:function(){return"DashboardSettingsModal Modal--medium"}},
{key:"title",value:function(){return d.translator.trans("datitisev-dashboard.admin.settings.title")}},{key:"form",value:function(){return[m("div",{className:"Form-group"},m("h2",null,d.translator.trans("datitisev-dashboard.admin.settings.github_heading")),m("label",{htmlFor:"client_id"},d.translator.trans("datitisev-dashboard.admin.settings.clientId_label")),m("input",{type:"text",className:"FormControl",bidi:this.setting("datitisev-dashboard.github.client_id")}),m("label",{htmlFor:"client_id"},d.translator.trans("datitisev-dashboard.admin.settings.clientSecret_label")),
m("input",{type:"text",className:"FormControl",bidi:this.setting("datitisev-dashboard.github.client_secret")}),m("h2",null,d.translator.trans("datitisev-dashboard.admin.settings.graph_heading")),m("label",{htmlFor:"client_id"},d.translator.trans("datitisev-dashboard.admin.settings.interval_label")),m("input",{type:"number",className:"FormControl",bidi:this.setting("datitisev-dashboard.graph.dataInterval")}))]}}]);return b}(a);f("default",e)}}});"use strict";
System.register("datitisev/dashboard/components/ExtensionUpdatesModal",["flarum/components/Modal","flarum/app"],function(f,h){var a,d,e;return{setters:[function(b){a=b["default"]},function(a){d=a["default"]}],execute:function(){e=function(a){function b(){babelHelpers.classCallCheck(this,b);return babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}babelHelpers.inherits(b,a);babelHelpers.createClass(b,[{key:"init",value:function(){this.extensionUpdates=
0;this.loading=!0;this.needsUpdate=[];this.solution=this.error=null;this.getPackagesAndVersions()}},{key:"className",value:function(){return"DashboardSettingsModal ExtensionUpdatesModal Modal--large"}},{key:"title",value:function(){if(0<this.extensionUpdates)return d.translator.trans("datitisev-dashboard.admin.dashboard.extensionUpdates.updatesAvaliable",{number:this.extensionUpdates});if(this.error)return d.translator.trans("datitisev-dashboard.admin.dashboard.extensionUpdates.error");if(this.loading)return d.translator.trans("datitisev-dashboard.admin.dashboard.extensionUpdates.checking");
if(0==this.extensionUpdates)return d.translator.trans("datitisev-dashboard.admin.dashboard.extensionUpdates.noUpdates")}},{key:"content",value:function(){var a=this;return m("div",{className:"PermissionGrid container"},m("table",{className:"PermissionGrid",style:this.error||0==this.extensionUpdates?"display: none":""},m("thead",null,m("tr",null,m("th",null,"Extension"),m("th",null,"Version Installed"),m("th",null,"New Version"))),m("tbody",null,Object.keys(this.needsUpdate).map(function(c){c=a.needsUpdate[c];
return m("tr",{className:"ExtensionList--Item PermissionGrid-child"},m("td",{className:"ExtensionListItem--Name"},c.name),m("td",{className:"ExtensionListItem--Installed"},c.oldVersion),m("td",{className:"ExtensionListItem--NewVersion"},c.newVersion))}))),m("div",{className:this.error?"":"ExtensionUpdatesModal--Error hidden"},m("p",null,m.trust(this.error)),m("p",null,m.trust(this.solution))),m("div",{style:0!=this.extensionUpdates||this.error||this.loading?"display: none":""},m("h3",null,d.translator.trans("datitisev-dashboard.admin.dashboard.extensionUpdates.noUpdates"))))}},
{key:"getPackagesAndVersions",value:function(){var a=this,b=d.data.extensions;Object.keys(b).forEach(function(c,e,f){if(!b[c]||!b[c].source)return!1;var g=b[c];c=g.source.url.replace(".git","").replace("github.com","api.github.com/repos");if(0<=c.indexOf("github.com"))c="https://api.github.com/repos/"+g.name+"/tags",c+="?client_id="+d.forum.attribute("datitisev-dashboard.github.client_id")+"&client_secret="+d.forum.attribute("datitisev-dashboard.github.client_secret");else return!1;a.request({url:c,
method:"GET"}).then(function(b){a.error&&(a.error=null);if(b){b=b&&b.length?b[0].name:null;var c=g.version;b&&c!=b&&"dev-master"!==c&&"@dev"!=c?(a.extensionUpdates=a.needsUpdate.length+1,Promise.resolve(a.needsUpdate.push({name:g.name,oldVersion:c,newVersion:b})).then(function(){f.length-1==e&&(a.extensionUpdates=a.needsUpdate.length,a.loading=!1);m.redraw()})["catch"](function(b){a.error=b;m.redraw()})):(a.extensionUpdates=a.needsUpdate.length,f.length-1==e&&(a.loading=!1),m.redraw())}})["catch"](function(b){if(!b||
"object"!=("undefined"===typeof b?"undefined":babelHelpers["typeof"](b))||!b.message)return!1;var c=0<=b.message.indexOf("rate limit")?b.message.substr(0,38):b.message;if("Not Found"==c&&f.length-1==e)a.loading=!1,m.redraw();else if("Not Found"==c)return!1;b=0<=b.message.indexOf("rate limit")?d.translator.trans("datitisev-dashboard.admin.dashboard.extensionUpdates.addClientIdAndSecret"):"";a.error="<b>GitHub:</b> "+c;a.solution=b;a.loading=!1;m.redraw()})});setTimeout(function(){a.error="";a.solution=
"";a.extensionUpdates=0;a.needsUpdate=[];a.loading=!1;a.getPackagesAndVersions();m.redraw()},6E4)}},{key:"request",value:function(a){return new Promise(function(b,c){m.request({method:a.method?a.method:"GET",url:a.url}).then(b)["catch"](c)})}}]);return b}(a);f("default",e)}}});"use strict";
System.register("datitisev/dashboard/components/WidgetGraph",["flarum/extend","flarum/app","datitisev/dashboard/DashboardSection"],function(f,h){var a,d,e,b,g,c,k;return{setters:[function(a){},function(b){a=b["default"]},function(a){d=a["default"]}],execute:function(){e=!1;c=g=b=null;k=function(d){function f(){babelHelpers.classCallCheck(this,f);return babelHelpers.possibleConstructorReturn(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}babelHelpers.inherits(f,d);babelHelpers.createClass(f,
[{key:"config",value:function(){e||this.getGraphData()}},{key:"content",value:function(){a.translator.trans("datitisev-dashboard.admin.dashboard.months.january");a.translator.trans("datitisev-dashboard.admin.dashboard.months.february");a.translator.trans("datitisev-dashboard.admin.dashboard.months.march");a.translator.trans("datitisev-dashboard.admin.dashboard.months.april");a.translator.trans("datitisev-dashboard.admin.dashboard.months.may");a.translator.trans("datitisev-dashboard.admin.dashboard.months.june");
a.translator.trans("datitisev-dashboard.admin.dashboard.months.july");a.translator.trans("datitisev-dashboard.admin.dashboard.months.august");a.translator.trans("datitisev-dashboard.admin.dashboard.months.september");a.translator.trans("datitisev-dashboard.admin.dashboard.months.october");a.translator.trans("datitisev-dashboard.admin.dashboard.months.november");a.translator.trans("datitisev-dashboard.admin.dashboard.months.december");return m("div",{className:"DashboardGraph--Categories"},m("div",
{className:"DashboardGraph--Category Category--Users"},m("span",{className:"color"}),a.translator.trans("datitisev-dashboard.admin.dashboard.graph.users"),m("br",null),m("span",{className:"number"},g?g:"...")),m("div",{className:"DashboardGraph--Category Category--Discussions"},m("span",{className:"color"}),a.translator.trans("datitisev-dashboard.admin.dashboard.graph.discussions"),m("br",null),m("span",{className:"number"},b?b:"...")),m("div",{className:"DashboardGraph--Category Category--Posts"},
m("span",{className:"color"}),a.translator.trans("datitisev-dashboard.admin.dashboard.graph.posts"),m("br",null),m("span",{className:"number"},c?c:"...")))}},{key:"className",value:function(){return"DashboardGraph"}},{key:"getGraphData",value:function(){e=!0;a.store.find("discussions",{sort:"-startTime",page:{limit:1}}).then(function(d){b=d&&d[0]?d[0].id():"???";m.redraw();a.store.find("users",{sort:"-joinTime",page:{limit:1}}).then(function(a){g=a.length&&a[0]?a[0].id():"???";c="???";m.redraw()});
setTimeout(function(){e=!1;b;g;c=null;m.redraw()},6E4*Math.round(parseInt(a.forum.attribute("datitisev-dashboard.graph.dataInterval")||"10")))})}},{key:"graphView",value:function(){return m("div",{className:"DashboardGraph--Graph"},Object.keys(months).map(function(a){a=months[a];return m("div",{className:"DashboardGraph--Month"},m("div",{className:"bars"},"BAR"),m("div",{className:"name"},a))}))}}]);return f}(d);f("default",k)}}});"use strict";
System.register("datitisev/dashboard/components/WidgetVersions",["flarum/extend","flarum/app","flarum/components/Button","datitisev/dashboard/DashboardSection","datitisev/dashboard/components/ExtensionUpdatesModal"],function(f,h){var a,d,e,b,g;return{setters:[function(a){},function(b){a=b["default"]},function(a){d=a["default"]},function(a){e=a["default"]},function(a){b=a["default"]}],execute:function(){g=function(c){function e(){babelHelpers.classCallCheck(this,e);return babelHelpers.possibleConstructorReturn(this,
(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}babelHelpers.inherits(e,c);babelHelpers.createClass(e,[{key:"content",value:function(){return m("ul",null,m("li",null,d.component({children:a.translator.trans("datitisev-dashboard.admin.dashboard.extensionUpdates.checkUpdates_button"),className:"Button Button--primary",onclick:function(){a.modal.show(new b)}})),m("li",null,a.translator.trans("datitisev-dashboard.admin.dashboard.flarum_version",{version:m("strong",null,a.forum.attribute("version"))})),
m("li",null,a.translator.trans("datitisev-dashboard.admin.dashboard.php_version",{version:m("strong",null,a.data.settings.phpVersion)})))}},{key:"className",value:function(){return"Versions"}}]);return e}(e);f("default",g)}}});"use strict";
System.register("datitisev/dashboard/DashboardSection",["flarum/extend","flarum/Component"],function(f,h){var a,d;return{setters:[function(a){},function(d){a=d["default"]}],execute:function(){d=function(a){function b(){babelHelpers.classCallCheck(this,b);return babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}babelHelpers.inherits(b,a);babelHelpers.createClass(b,[{key:"init",value:function(){this.config&&this.config()}},{key:"view",value:function(){return m("div",
{className:"DashboardPage--Section "+(this.className?this.className():"")},this.content())}},{key:"content",value:function(){return m("span",null,"Something")}}]);return b}(a);f("default",d)}}});"use strict";
System.register("datitisev/dashboard/main",["flarum/extend","flarum/app","datitisev/dashboard/changeDashboardPage","datitisev/dashboard/components/DashboardSettingsModal"],function(f,h){var a,d,e;return{setters:[function(a){},function(b){a=b["default"]},function(a){d=a["default"]},function(a){e=a["default"]}],execute:function(){a.initializers.add("datitisev/dashboard",function(){d();a.extensionSettings["datitisev-dashboard"]=function(){return a.modal.show(new e)}})}}});";